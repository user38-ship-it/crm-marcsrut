# Booking CRM

Booking CRM — це стартова версія екосистеми для керування бронюванням рейсів перевізників. Репозиторій містить бекенд на FastAPI, сервіс генерації рейсів, а також Telegram-бота для водіїв.

## Структура проекту

```
backend/
  app/
    api/           # REST-роути FastAPI
    core/          # конфігурація проекту
    db/            # налаштування SQLAlchemy
    models/        # ORM-моделі
    schemas/       # Pydantic-схеми
    services/      # доменні сервіси
bots/
  telegram/        # бот для водіїв
  viber/           # заглушка для Viber-бота
infra/             # інфраструктурні скрипти (зарезервовано)
```

## Швидкий старт локально

1. Створіть файл `.env` на основі `.env.example` та пропишіть токен Telegram-бота.
2. Запустіть `docker-compose`:
   ```bash
   docker compose up --build
   ```
3. Бекенд буде доступний на `http://localhost:8000`, Telegram-бот підключиться до вказаного токена.

### Ручний запуск CRM-панелі для розробки

Якщо потрібно швидко переглянути веб-інтерфейс без Docker, активуйте віртуальне середовище та виконайте:

```bash
pip install -r requirements.txt
uvicorn backend.app.main:app --reload
```

Після старту застосунок буде доступний на `http://localhost:8000`. Статичні файли сервісу (CSS/JS) віддаються через `/static`, а сторінки CRM доступні за адресами `/`, `/trips`, `/drivers`, `/bookings`, `/analytics`, `/settings` та `/login`.

## API

### `POST /auth/register`
Створює OTP для номера телефону. У відповіді повертається тестовий код.

### `POST /auth/verify`
Перевіряє OTP, оновлює профіль користувача та помічає його як верифікованого.

### `POST /survey/routes`
Приймає результати опитування та створює маршрути, шаблони рейсів і згенеровані рейси.

## Telegram-бот

Telegram-бот реалізований на `aiogram v3` та надає команду `/start` з меню дій водія: "Мої рейси", "Старт", "Немає місць", "Фініш".

## Подальші кроки

- Реалізувати повний бізнес-процес бронювання.
- Додати зберігання статистики та модуль просування рейсів.
- Описати інфраструктуру в каталозі `infra/`.
