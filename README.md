# Booking CRM

Booking CRM — це стартова версія екосистеми для керування бронюванням рейсів перевізників. Репозиторій містить бекенд на FastAPI, веб-інтерфейс адміністратора на Jinja2 + Bootstrap 5, сервіс генерації рейсів, а також Telegram-бота для водіїв.

## Структура проекту

```
backend/
  app/
    api/           # REST-роути FastAPI
    core/          # конфігурація проекту
    db/            # налаштування SQLAlchemy
    models/        # ORM-моделі
    schemas/       # Pydantic-схеми
    services/      # доменні сервіси
    web/           # веб-інтерфейс на Jinja2
bots/
  telegram/        # бот для водіїв
  viber/           # заглушка для Viber-бота
infra/             # інфраструктурні скрипти (зарезервовано)
```

## Швидкий старт локально

1. Створіть файл `.env` на основі `.env.example` та пропишіть токен Telegram-бота.
2. Запустіть `docker-compose`:
   ```bash
   docker compose up --build
   ```
3. Бекенд та веб-інтерфейс будуть доступні на `http://localhost:8000`, Telegram-бот підключиться до вказаного токена.

## Веб-інтерфейс

Адмін-панель доступна в браузері за адресою `http://localhost:8000/`. Інтерфейс містить навігацію по розділах "Рейси", "Водії", "Бронювання", "Аналітика", "Налаштування" та сторінку входу. На дашборді відображається тестова статистика за рейсами, заповненістю та активними водіями.

### Локальний запуск без Docker

1. Встановіть залежності бекенду:
   ```bash
   pip install -r backend/requirements.txt
   ```
2. Запустіть застосунок командою:
   ```bash
   uvicorn app.main:app --reload --port 8000 --app-dir backend
   ```
3. Відкрийте `http://localhost:8000` у браузері та переконайтеся, що меню та сторінки веб-інтерфейсу відображаються коректно.

## API

### `POST /auth/register`
Створює OTP для номера телефону. У відповіді повертається тестовий код.

### `POST /auth/verify`
Перевіряє OTP, оновлює профіль користувача та помічає його як верифікованого.

### `POST /survey/routes`
Приймає результати опитування та створює маршрути, шаблони рейсів і згенеровані рейси.

## Telegram-бот

Telegram-бот реалізований на `aiogram v3` та надає команду `/start` з меню дій водія: "Мої рейси", "Старт", "Немає місць", "Фініш".

## Подальші кроки

- Реалізувати повний бізнес-процес бронювання.
- Додати зберігання статистики та модуль просування рейсів.
- Описати інфраструктуру в каталозі `infra/`.
